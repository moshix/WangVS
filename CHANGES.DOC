Release 01.00.00, release date June 6, 1999.
The first release available to the general public, released June 6, 1999.

Release 01.01.00 release date July 5, 1999.
A few small changes were made in this release.  An internal data structure
for file management was sometimes destroyed when a file was opened multiple
times.  This was corrected.
The link SVC now cancels on error instead of printing a message.  The cancel
screen displays the name of the program that could not be linked to.
After receiving some documentation on the VSDMS file format, support for
this file type has been improved.
The formsio SVC has been added, although it does not work properly.  I am
still doing research on this, and expect it to be implemented in the next
version.  Various utilities like the LINKER use this SVC.
The FDR is now also updated for files open in I/O mode when the file is closed.

Release 01.02.00, release date August 1, 1999.
Again about 40 hours worth of changes were made in this release.  The logptr
value as saved and extracted by the procedure interpreter is now correct, so
now it is possible to run a procedure from another procedure.  The block
count values in the VSDMS format were incorrect, and this has been corrected.
Support for the formsio SVC has been improved.  It is probably not perfect,
but at least it does work.  A request to read multiple blocks in PAM mode now
no longer fails if the request can be partially satisfied.  The cursor is now
correctly positioned if only the column is zero.  An erroneous overflow that
was generated by the SRP instruction has been fixed.  Rewrite in PAM mode is
now implemented, although it has not been tested much.  The getparm which is
presented for editing the FDR1 has been enhanced to allow editing the FDR1 in
hexa-decimal notation too.  This getparm can now also be invoked from the
filenames screen in the command processor.

Release 01.02.01, release date August 3, 1999.
The extract amount of physical memory not resident now returns 998 pages.

Release 01.03.00, release date September 1, 1999.
The device class for files opened in output mode now defaults to disk if
nothing else is specified.  Owner and file protection class are now set in the
fdr.  A full rename, renaming a file to another library, now works.  Rename now
also check if the old and the new filename exist.  The big attributes option
for readvtoc is now supported.  The getparm which is issued when a file is
opened has been enhanced, so now it contains all fields that are supposed to be
in this getparm.  The values are copied to the ufb.  Not all these values are
used yet though.  When the nogetparm bit is set in the ufb, a getparm is now
no longer issued.  The command processor now shows the name of the active
program.  The command processor now shows the return code, if there is one.
Putparm cleanup no longer causes the program to crash.  Getparm with a keylist
with fields beyond the end of the screen no longer causes the program to crash.
When an open exit is taken, fs1 is now set to 9.  When a fdr is created, it now
shows 1000 blocks allocated and zero blocks used, this size of this initial
extent should be allocated based on the value supplied in the ufb, but at the
moment this default value is used.  Lighstpeed backup files created and
modified by the emulator now have a null terminator after the text LSBACKUP
in the header, so that Lightspeed will recognize them as a lightspeed backup
file, and allow copying them back to a real machine.  A message is now printed
for attempts to extract information that is not supported yet.

Release 01.04.00, release date November 1, 1999.
Some internal changes were made to prepare for a port to the GCC compiler.
This would allow porting to the environments supported by that compiler.
Changes have been made to the getheap and freeheap emulation.  Getheap now
keeps track of poolnames that have been created.  Also, some heap management
has been implemented, so that getheap will try to use some of the free space
left when allocating pieces of memory that are not a multiple of 2K.  Freeheap
will now destroy an entire subpool when told to do so.  It does not yet free
individual portions of memory.  The key position and key size are now set in
the fdr1 for indexed files.  The cursor is now properly positioned for the
scratch file and scratch library commands in the command processor.  The system
name has been added to the initialization file.  The VSDMS header which is
created for VSDMS files needed this.  Although it did try to extract this, the
system name was not yet implemented.  This has now been implemented, so that
working with the VSDMS volume types should work a lot better now.
The scratch and rename svc functions would always fail for VSDMS files, since
it would issue a return code 20, even when the file was actually scratched or
renamed.  This has been fixed, so that now a source file can be replaced from
within the editor if this volume emulation type is used for the source file.
A small getting started text file was added to the documentation.

Release 01.05.00, release date December 10, 1999.
Some internal changes are in progress to be able to support writing to indexed
files.  This takes a lot of time and effort.  A change was made to the putparm
emulation.  It now first checks for backward refences, and if selected it will
ignore the other options.  This makes various things work better.  If the same
file is compiled from within the editor multiple times, the options no longer
need to be entered again and again.  The freeheap emulation now keeps track of
freed memory, so that it can be re-used.

Release 01.06.00, release date March 3, 2000.
A problem in the getbuf svc sometimes caused unrelated buffers with totally
different poolnames to be merged.  This has been corrected.  Reading a record
now copies the correct amount of data into the record area.  Rewrite for
indexed files now works, but it is likely to corrupt primary key structures.
Updates to alternate paths are not performed at all.  Make sure you have backup
copies of your indexed files if you attempt rewriting records.  In order to
make this work, block splits are supported.  However, this may cause files to
grow.  On some operating systems, this may cause a problem if a file is opened
multiple times simultaneously.  The updating of the end block value in the fdr
was changed.  This value is now also updated in the ufb when a block is
written to a file.  The way the fdr is updated has changed.  The emulator
displayed a date of January 0, 2000 on December 31st, 1999.  Since that date
already passed, this has not been corrected.  With this release, things that
used to work may now be broken.  Things that used to be broken may now work.
Let me know the result of your tests if you care at all.

Release 01.07.00, release date May 1, 2000.
Attempting to scratch a library would crash the emulator.  Now it still does
not work, but the emulator returns return code 52, instead of crashing.
Support for the following extract items has been added: task number (27),
otherio (45), system paging library (60), users execute, read and write access
flags (63, 64, 65), cluster (67), device list (121), device information (123),
task information (125).  The device and task information returns fixed bogus
information, so that it just returns some data that makes a little sense.
This data is currently not configurable, and may even be incorrect.
Embedded spaces in the file location fields of the lightspeed backup file
header are now replaced by nulls.
DMS reported a file status 21 on invalid keys in several cases.  The proper
file status for this however is 23.  The emulator now reports a file status
23 for invalid key, and file status 60 for certain unusual conditions.
Getheap and freeheap did not search linklevels properly.  This has been
improved.  Getheap now allocates memory at the specified linklevel, if a
specific linklevel is specified.
Rewrite for alternate indexed files now deletes the old alternate key path to
the record if the value of that key has changed.  The new key path for that
record is not yet added, losing that record on that key path.  Please note
that this corrupts alternate key structures.  Make sure you have backup copies
of your indexed files if you attempt rewriting records.  This stuff is still
heavily under development and thus unreliable.

Release 1.08.00, Release date June 1, 2000.
In the previous release, I forgot to mention that DMS no longer assumes that
all UFB's are version 3.  It was clobbering memory when shorter UFB's were
used.  The UFB version 3 fields are now only used when available.
For this release, there are a lot of fixes for yet more problems.
Freeheap did not properly search the linklevels specified.
Due to a problem in the Symantec C++ compiler, a shift by more than 31 bits
failed.  The code that was failing has been replaced with something that works
around this problem in this particular PC compiler, since the Symantec C++
compiler is no longer supported, and I am still using it.
Shifting a negative value more than 31 bits with SLA now causes an overflow,
as it should.  This was a bug of my own.
Positioning indexed files used a wrong record length for compressed records.
Branch instructions now truncate the branch address to 24 bits, so that it
will not crash the emulator while attempting to branch to some high address.
The AXD1 is now read only for alternate indexed files.  The index number in
the AXD1 is now initialized after it is read from the file.
Indexed sequential reads now properly get the block length of the data block.
Sequential reads on a consecutive file get a file status 10 when the file is
at end, this used to return a file status 23, which was not correct.
The native files are no longer opened twice when both the shared and the I/O
open mode flag bits were set in the UFB at open.
When getheap was re-using freed memory, the heap was corrupted as a result.
The add and subtract decimal instructions caused the emulator to crash if the
length of the packed decimal number was 16 bytes.
Check SVC now actually checks workstation and timer events.  If they are used
in a multiple event check, check SVC now returns the proper offset for the
event that occurred, based on the list supplied to the SVC, and the event that
occurred.  Until now, timer events expired immediately.
When a read with the nodata modifier is issued for variable length records, the
proper record length is now returned.  The record length bytes are now taken
into account when processing these records.
The date is now properly calculated if the date is December 31st.  The date
and time is now maintained independent of the native system date and time,
however the user cannot enter the date and time at Initial Program Load yet,
since the IPL date and time are taken from the native systems date and time.
The time SVC now never returns a date and time value that is before the value
returned in the previous call.  Since the resolution of the time functions on
most systems is one second or more, the value for hundreths of seconds is set
to some random value.  The time SVC will continue to generate random values
until the value is not smaller than the value returned last time.  This may
cause slight delays for programs that frequently obtain the date and time.
A read modifiable for a workstation file now results in an at end condition
if no field on the screen was modified.

Release 01.09.00, Release date July 3, 2000.
Yet again, the internal date processing routines have been corrected.  I hope
this time it is all correct.
Several IPL screens have been added.  A getparm for setting the date and time
has been added.  It defaults to the native system date and time, but it can
be altered.  A real machine will show an entry mask, or not show this screen
at all.  A getparm for entering the config files has been added.  The config
file is still ignored.  These are just more screens to enter at IPL time.
Getparm now recognizes PF-keys above 16.  It accidentally masked off some bits.
Getheap now starts searching for a pool at the specified linklevel.
Sequential reads on an alternate index now result in a filestatus 10 when the
end of the file has been reached, rather than filestatus 23.
Workstation I/O has been overhauled so that the start function now works like
it should.  Programs can now properly check the keyboard status.
Starting by alternate key did not set the proper length of the key, so a
subsequent read next would not advance beyond that record.
Start skip for variable length files failed when skipping backwards.
Some slight changes have been made to reading with the nodata modifier.
Cancel processing has been enhanced slightly.  Logoff will now generate a
proper cancel.  Real cancel exit handling is still under development.

Release 01.10.00, Release date September 4, 2000.
This release only fixes some small problems, even though it has been two months
since the previous version.  I have been on a short vacation.  Yet again I have
updated the time routines.  Sometimes the timer values did not work properly.
Now the time svc never returns a time value that is less than the value that
was returned on the previous call.  Really.  The value that is put in the
hundreths of seconds portion is now based on the native system timer.  The low
order portion of this timer is used.  The second count is increased by one if
a lower time value than the previous time would be returned.  This should also
work on systems that only have a time resolution of two seconds, like my
machine does.
If a call to a DMS function fails, DMS will now put the normal return address
in general register 0, like it should.  Thus the code at the error or the end
of data address can now resume normal operation after dealing with the error.
It was brought to my attention that the emulator did not do this.  Thanks!
Currently I am working on improving the block split logic.  When this is
completed, I will be able to add support for the rewrite and delete functions
for indexed files.  One problem that has been corrected is that block number
zero is now recognized as a valid data block for data link pointers.  The
primary and alternate key tree structures are still not properly updated
though, so remember to make your backups.  I have not actually tested this
version of block splitting yet, since I am still working on it, so beware.
If this versions messes up, keep using the previous version and inform me
about what problems you encounter.

Release 1.11.00, Release date November 2, 2000.
The block split logic has been added to the data and the index blocks.  This
release attempts to properly update the primary index tree.  I have not had
time to test it a lot yet.  Backups are still a good idea.  The note for the
previous release said I would be able to add support for rewrite.  Of course
rewrite is already implemented, though not fully tested.  What I meant was
write of course.  I will probably start adding write now.
There was a bug in the Divide Decimal instruction.  The DP instruction would
sometimes fail to recognize an overflow.  Sometimes the computed results were
just wrong.  I have changed the logic for this instruction, but I have just
now completed it, so it might still be not quite right.

Release 1.12.00, Release date December 4, 2000.
The block split logic has been corrected so that it should now link to the
proper block number when a block split is performed.  For files opened in
block mode, the record area is now used when rewriting the block, instead
of the buffer area.  When records are held, without updating or deleting the
record, the hold is now released when another hold is performed.  This fixes
a problem with the emulator running out of memory, causing updates to fail at
a point where no more buffers are available.  There is now some support for
writing and deleting records for indexed files.  Although this is still under
development, the current release will perform these operations most of the
time.  However, writing to an empty file will probably not work.  Also, if all
records in a block are deleted, the block is not yet removed from use.  There
may be more problems, as this is still in the works.  Do keep backup copies
around if you care anything about your data.

Release 1.13.00, Release date January 3, 2001.
There have been no big changes this time, since I have been working a lot on
deleting a key from the index tree.  Much of this logic is still untested.  For
those of you that can't wait for new versions, I thought I would release a new
version anyway.  Do not expect too much though.  The previous version might be
more reliable.  I noticed that the date is one day off from the date entered
at IPL-time.  Maybe I will fix that in the next release.  Comments are welcome.

Release 1.14.00, Release date February 3, 2001.
This time I have the date stuff nailed down, I hope.  So the date is no longer
off by one day from the date entered on the IPL screen.  Also, some internal
date routines for DMS have been fixed.  The creation date, the modification
date and the expiration date are now set to the values specified in the UFB
when a new file is created.  Writing records to an indexed file should now
work.  Deleting and rewriting records has been debugged some more.  The block
split logic has been reviewed slightly and this should now also work a little
better.  When a block is split, the buffer is now reloaded with the block that
contains the record that had been updated if possible.  Creating an new indexed
file should now also work, creating an index root block if the first record
is written to the file.  The AXD1 and the alternate key index root blocks are
probably not properly written yet.  The indexed file support is still not
tested very extensively.  Some changes were made to the extract information
for the extract types that require additional input.  These now actually try
to use the device number that is passed, although not all the time.  Most of
these changes were made just so that I can test some programs that want to
access communications lines, and also because sometimes you get fed up working
on DMS for two straight months.

Release 1.14.01, Release date February 7, 2001.
The index root pointer and the number of index levels are now updated when
block splits have occurred.
Release 1.14.02, Release date February 7, 2001.
Really update the number of index levels.

Release 1.15.00, Release date April 9, 2001.
Support for updating alternate indexed files has been added.  You can now also
create alternate indexed files, and the AXD1 will then be created and filled
in.  I have not tested this extensively yet, since I just now finished coding
it all.  This took me over two months.  I will do some more testing, but since
this is again a major step forward, I though some of you might want to try this
version, since some support for alternate keys is better than none at all, even
if it is not fully tested yet.  While working on the alternate key stuff, I did
find some bugs that I suspect also exist in the primary key handling stuff, so
I will probably spend some time on reviewing it all.  When reloading the block
after deleting a record in an indexed file, the buffer addres is now properly
obtained, this was a bug in the delete for indexed files which has been fixed.
The getparm SVC sometimes displays keywords that are non-modifable.  These were
suppressed altogether by the emulator.  They are now being displayed.

Release 1.16.00, Release date April 30, 2001.

Buffers are now freed when a problem occurs while updating alternate keys.
When an alternate key path does not allow for duplicate keys, a duplicate key
is no lomger reported when rewriting the record if the alternate key value has
remained unchanged.  When deleting an alternate key value from the index tree
for that key, that value is now properly searched for and deleted.  Searching
for an alternate key value is now done properly even if the key overlaps with
the primary key.  In the manage files and library screens, an ending fac is
now placed after the file, library and volume names in the lists.

Release 1.17.00, Release date June 3, 2001.

The date now works correct when the system is IPL'ed in the year 2000.
The divide instructions D and DR now work with a 64 bit precision.  Getheap
will now report the proper return code if there is not enough memory to
satisfy the request.  If there is not enough memory, getheap will return
the size of the largest available piece.  Some privileged instructions now
cause a privileged instruction exception.  The XPAND instruction now properly
sets the condition code.  Several additional floating point instructions have
been implemented, especially short floating point and decimal floating point
instructions.  The floating point instructions are still in the works.
Control register 13 now holds a clock tick value, but it is not yet related
to the cpu type, and it is not yet related to midnight either.  When a program
is loaded, General register 0 will now be loaded with the value of the entry
point of the program.

Release 1.18.00, Release date August 4, 2001.

All floating point instructions are now implemented.  They have not been tested
much, since I do not have any programs that perform a reasonable test of these.
The divide instruction D and DR were still not working with the proper 64 bit
precision.  The new algorithm results in a correct answer now.  Unfortunately
this algorithm is somewhat slower, so it is only used when 64 bit precision
is required.  The past two months were spent mostly on this.  Considerable time
was also spent on testing instructions.  This resulted in fixing numerous small
problems that will not have affected most programs.  Also, some problems were
fixed that probably caused problems in lots of programs.  On the other hand,
I have not received any bug reports, so it canït have been that bad.
The MR instruction has been fixed for negative values.  It was also putting the
result in the lower register sometimes.  The AP and SP instructions were not
always setting the condition code to the proper value.  The CP instruction now
works correct if the numbers are the same but with opposite sign.  The RTC and
RPC instruction now properly restore the condition code from the save area.
The LCR and LPR instruction did not load the value when an overflow occurred.
The M instruction has been fixed for negative values.

Release 1.19.00, Release date September 3, 2001.

The debugger now shows OR instead of LR for the OR instruction.
The CVQ instruction now sets the result to a true zero when the result is zero.
The MH and M instructions sometimes yielded erroneous results when the internal
computations caused overflow.  This probably did not affect the PC version.
The PCEXIT supervisor call now actually works.  A maximum of 8 levels can be
set.  When a program exception occurs, control passes to the appropriate exit
routine.  The extract SVC now supports extraction of the PCW at the time the
last PCEXIT routine was invoked.
When the configuration is such that there is less than 1.5 meg of memory
available to the emulator, the heap space will now start off at 0x00001000.
This means that the buffers are now aligned on a 2K boundary.  Memory is now
properly freed, where it used to be failing to free the memory because of the
improper alignment.  Also, some internal DMS buffers are located at 0x00000800,
so now DMS no longer corrupts the heap space.  The heap used to start at
0x00000400 for configurations with limited memory.
When a program is cancelled, the command processor now takes control again.
The completion report now shows that the program was cancelled.
When single stepping through a program in the debugger, control is now properly
returned to the command processor if the program ends.
The command processor now properly checks for the form not being larger than
254 in the set print mode defaults screen.

Release 1.20.00, Release date September 21, 2001.

The WANGVS.INI and the CONFIG file are now closed when they have been read.
Getparms and putparms are now aware of transparant linking.  This fixes the
problem where a procedure would not supply values to getparms of some programs.
Support has been added for the mount screen that appears when a disk volume
is mounted.  This screen allows the operator to interactively enter the path
to the emulated volume, so that a volume can now be mounted after the IPL.
Getparm now supports the system type getparm that is needed for mount.
Getparm now accepts a pfkey value from a putparm, if one is available.  It now
also sets the aid value to "@" if no aid value was explicitly specified.  If
the getparm is of a hidden type, for default parameters, and no putparm is
available, the aid value is set to 0x60.
Some disk units were added to the default configuration for experimental use.
These disks may be used in the wangvs.ini file if so desired.  If nothing is
added, the devices will be available for mounting a disk volume later.
Read workstation now uses the proper workstation command word, based on the
modifier used for the read.  Read workstation now resets the modified tag in
screen memory.  This fixes some problems with workstation emulation.
When writing a record to a printfile, the record area address is now truncated
to the three low order bytes, so that the emulator does not crash on this.
The procedure interpreter logfile pointer is now cleared when the first
invocation of the procedure interpreter terminates.  This fixes a problem where
the procedure interpreter will fail after being run once successfully.
General register zero is now set to the entry point of the program only when
linking from the command processor.  This fixes erroneous return codes from
lower levels in some programs.  When a logoff is issued, the program now
unlinks to the previous linklevel.

Release 1.21.00, Release date March 3, 2002.

The cexit svc has been implemented.  If a message is specified for overruling
the PF16 text in the command processor, it is now used.  If the program
encounters a cancel condition, control is transferred to the cexit handler if
one was specified.  In that case, the cexit block is placed on the stack, and
the program can try to resume processing.  Cexit's are your friend.
If some program exception occurs, and there is no active pcexit for it, there
will now be a cancel message displayed identifying the type of exception.
These exceptions can also be handled by the cexit handler if one is present.
In order to implement this, lots of changes had to be made to the way that
transfer of control was implemented.  This is one of the reasons why it took
so long for a new release.  Changes have not been tested extensively, in
particular related to issues involving using the debugger.  If problems arise,
let me know.  I thought it was time to make a new release available just to
move ahead again.  The cexit information is used when cancel conditions occur.
In the command processor, cancel messages are now properly emulated, including
the list of programs that are possibly abended when processing is cancelled.
The PF16 text is also used in the cancel messages if such a text has been
specified in the cexit options.  If the user attempts to cancel the program,
a cancel screen is now displayed, unless the cexit option prevents that screen
from being displayed.  The user can elect to enter the command processor or
the debugger from this screen.  If the user chooses to cancel the program, the
cancel message is now displayed in the command processor upon returning to the
command processor.  When the debugger has been active, the current
implementation of the debugger will corrupt the screen display.  When leaving
the debugger, the screen is now refreshed.

Release 1.22.00, Release date April 4, 2002.

A problem with flow of control flow when entering the debugger was fixed.
Check I/O now assumes the check was successful, although nothing is really
checked or waited for.

Release 1.23.00, Release date July 1, 2002.

XIO is now supported for workstations.  This means that programs that use
the wsxio vssubs now work a little better.  The emulator would crash when
the help key was used within the command processor after cancelling or
completing a program.  This has been fixed.  Mounting a disk volume for
initialization is now supported.  Opening a file on an unstructured volume
is now possible.  This is not of any use yet.  Sector I/O on diskettes is
under development.

Release 1.23.01, Release data July 2, 2002.

The changes to mount caused the ipl to crash, these problems were fixed.
